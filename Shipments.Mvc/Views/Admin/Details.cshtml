@model ShipmentDetailsDto
@using Shipments.Shared.Domain.Enums

<h2>Shipment #@Model.Id</h2>

<p>Status: <strong>@Model.Status</strong></p>
<p>ClientId: @Model.ClientId</p>
<p>CourierId: @(Model.CourierId ?? "Not assigned")</p>

<hr />

<h3>Change status</h3>
<form asp-action="UpdateStatus" method="post">
    <input type="hidden" name="shipmentId" value="@Model.Id" />

    <select name="newStatus">
        @foreach (ShipmentStatus s in Enum.GetValues(typeof(ShipmentStatus)))
        {
            <option value="@s">@s</option>
        }
    </select>

    <textarea name="notes"></textarea>
    <button type="submit">Update</button>
</form>

<hr />

<h3>Assign courier</h3>
<a asp-action="Couriers" asp-route-shipmentId="@Model.Id">
    Choose courier
</a>

<hr />

<h3>History</h3>
<ul>
    @foreach (var e in Model.Events)
    {
        <li>
            @e.OccurredAtUtc:
            @e.OldStatus → @e.NewStatus
            (@e.PerformedByRole)
        </li>
    }
</ul>